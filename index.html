<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Generate D&D 2024 NPCs instantly on your phone">
  <meta name="theme-color" content="#8b4513">

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
  <link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192.png">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css">

  <title>D&D NPC Generator</title>
</head>
<body>
  <div id="app">
    <!-- Navigation -->
    <nav class="bottom-nav">
      <button class="nav-btn active" data-screen="generator">
        <span class="nav-icon">&#9881;</span>
        <span class="nav-label">Generator</span>
      </button>
      <button class="nav-btn" data-screen="library">
        <span class="nav-icon">&#128214;</span>
        <span class="nav-label">Library</span>
      </button>
    </nav>

    <!-- Screens -->
    <main class="screens">
      <!-- Generator Screen -->
      <section id="screen-generator" class="screen active">
        <header class="screen-header generator-header">
          <img id="generator-face-left" class="header-face" alt="" aria-hidden="true">
          <h1>NPC Generator</h1>
          <img id="generator-face-right" class="header-face" alt="" aria-hidden="true">
        </header>
        <div class="screen-content">
          <!-- Selectors will be rendered here by JS -->
          <div id="selectors"></div>
          <button id="btn-generate" class="btn btn-primary">Generate</button>
        </div>
      </section>

      <!-- Result Screen -->
      <section id="screen-result" class="screen">
        <header class="screen-header">
          <button id="btn-back" class="btn-icon">&larr;</button>
          <h1 id="result-name">NPC Name</h1>
        </header>
        <div class="screen-content">
          <div class="stat-controls">
            <label class="stat-control">
              <span>Archetype</span>
              <select id="result-archetype-select" class="stat-select"></select>
            </label>
            <label class="stat-control">
              <span>Tier</span>
              <select id="result-tier-select" class="stat-select"></select>
            </label>
          </div>
          <div id="result-summary" class="chips"></div>
          <div class="ac-badge" aria-label="Armor Class">
            <div class="ac-shield" aria-hidden="true"></div>
            <div class="ac-text">
              <span class="ac-label">AC</span>
              <span id="result-ac" class="ac-value">12</span>
            </div>
          </div>
          <div class="abilities-block" aria-label="Ability Modifiers">
            <div class="abilities-grid">
              <div class="ability-card">
                <div class="ability-main">
                  <span class="ability-label">STR</span>
                  <span class="ability-mod" data-ability="STR">+0</span>
                </div>
                <button class="ability-roll" type="button" data-ability="STR" aria-label="Roll STR saving throw">Save</button>
              </div>
              <div class="ability-card">
                <div class="ability-main">
                  <span class="ability-label">DEX</span>
                  <span class="ability-mod" data-ability="DEX">+0</span>
                </div>
                <button class="ability-roll" type="button" data-ability="DEX" aria-label="Roll DEX saving throw">Save</button>
              </div>
              <div class="ability-card">
                <div class="ability-main">
                  <span class="ability-label">CON</span>
                  <span class="ability-mod" data-ability="CON">+0</span>
                </div>
                <button class="ability-roll" type="button" data-ability="CON" aria-label="Roll CON saving throw">Save</button>
              </div>
              <div class="ability-card">
                <div class="ability-main">
                  <span class="ability-label">INT</span>
                  <span class="ability-mod" data-ability="INT">+0</span>
                </div>
                <button class="ability-roll" type="button" data-ability="INT" aria-label="Roll INT saving throw">Save</button>
              </div>
              <div class="ability-card">
                <div class="ability-main">
                  <span class="ability-label">WIS</span>
                  <span class="ability-mod" data-ability="WIS">+0</span>
                </div>
                <button class="ability-roll" type="button" data-ability="WIS" aria-label="Roll WIS saving throw">Save</button>
              </div>
              <div class="ability-card">
                <div class="ability-main">
                  <span class="ability-label">CHA</span>
                  <span class="ability-mod" data-ability="CHA">+0</span>
                </div>
                <button class="ability-roll" type="button" data-ability="CHA" aria-label="Roll CHA saving throw">Save</button>
              </div>
            </div>
          </div>
          <div id="result-statline" class="statline"></div>
          <div id="result-saves" class="statline small"></div>
          <div id="result-physical" class="description-section">
            <h2>Physical Description</h2>
            <p></p>
          </div>
          <div id="result-psych" class="description-section">
            <h2>Psychological Profile</h2>
            <p></p>
          </div>
          <div id="result-notes" class="description-section">
            <h2>Notes</h2>
            <textarea id="notes-input" class="notes-textarea" rows="4" placeholder="Add notes for this NPC..."></textarea>
          </div>
          <div class="action-buttons">
            <button id="btn-regenerate" class="btn btn-secondary">Regenerate</button>
            <button id="btn-copy" class="btn btn-secondary">Copy</button>
            <button id="btn-save" class="btn btn-primary">Save</button>
          </div>
        </div>
      </section>

      <!-- Library Screen -->
      <section id="screen-library" class="screen">
        <header class="screen-header">
          <h1>Library</h1>
        </header>
        <div class="screen-content">
          <div id="library-list"></div>
          <div id="library-empty" class="empty-state">
            <p>No saved NPCs yet</p>
            <button id="btn-generate-first" class="btn btn-primary">Generate one</button>
          </div>
        </div>
      </section>

      <!-- Library Detail Screen -->
      <section id="screen-library-detail" class="screen">
        <header class="screen-header">
          <button id="btn-back-library" class="btn-icon">&larr;</button>
          <h1 id="detail-name">NPC Name</h1>
        </header>
        <div class="screen-content">
          <div class="stat-controls">
            <label class="stat-control">
              <span>Archetype</span>
              <select id="detail-archetype-select" class="stat-select"></select>
            </label>
            <label class="stat-control">
              <span>Tier</span>
              <select id="detail-tier-select" class="stat-select"></select>
            </label>
          </div>
          <div id="detail-summary" class="chips"></div>
          <div class="ac-badge" aria-label="Armor Class">
            <div class="ac-shield" aria-hidden="true"></div>
            <div class="ac-text">
              <span class="ac-label">AC</span>
              <span id="detail-ac" class="ac-value">12</span>
            </div>
          </div>
          <div class="abilities-block" aria-label="Ability Modifiers">
            <div class="abilities-grid">
              <div class="ability-card">
                <div class="ability-main">
                  <span class="ability-label">STR</span>
                  <span class="ability-mod" data-ability="STR">+0</span>
                </div>
                <button class="ability-roll" type="button" data-ability="STR" aria-label="Roll STR saving throw">Save</button>
              </div>
              <div class="ability-card">
                <div class="ability-main">
                  <span class="ability-label">DEX</span>
                  <span class="ability-mod" data-ability="DEX">+0</span>
                </div>
                <button class="ability-roll" type="button" data-ability="DEX" aria-label="Roll DEX saving throw">Save</button>
              </div>
              <div class="ability-card">
                <div class="ability-main">
                  <span class="ability-label">CON</span>
                  <span class="ability-mod" data-ability="CON">+0</span>
                </div>
                <button class="ability-roll" type="button" data-ability="CON" aria-label="Roll CON saving throw">Save</button>
              </div>
              <div class="ability-card">
                <div class="ability-main">
                  <span class="ability-label">INT</span>
                  <span class="ability-mod" data-ability="INT">+0</span>
                </div>
                <button class="ability-roll" type="button" data-ability="INT" aria-label="Roll INT saving throw">Save</button>
              </div>
              <div class="ability-card">
                <div class="ability-main">
                  <span class="ability-label">WIS</span>
                  <span class="ability-mod" data-ability="WIS">+0</span>
                </div>
                <button class="ability-roll" type="button" data-ability="WIS" aria-label="Roll WIS saving throw">Save</button>
              </div>
              <div class="ability-card">
                <div class="ability-main">
                  <span class="ability-label">CHA</span>
                  <span class="ability-mod" data-ability="CHA">+0</span>
                </div>
                <button class="ability-roll" type="button" data-ability="CHA" aria-label="Roll CHA saving throw">Save</button>
              </div>
            </div>
          </div>
          <div id="detail-statline" class="statline"></div>
          <div id="detail-saves" class="statline small"></div>
          <div id="detail-physical" class="description-section">
            <h2>Physical Description</h2>
            <p></p>
          </div>
          <div id="detail-psych" class="description-section">
            <h2>Psychological Profile</h2>
            <p></p>
          </div>
          <div id="detail-notes" class="description-section">
            <h2>Notes</h2>
            <textarea id="detail-notes-input" class="notes-textarea" rows="4" placeholder="Add notes for this NPC..."></textarea>
          </div>
          <div class="action-buttons">
            <button id="btn-copy-detail" class="btn btn-secondary">Copy</button>
            <button id="btn-delete" class="btn btn-danger">Delete</button>
          </div>
        </div>
      </section>
    </main>

    <!-- Modal -->
    <div id="modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <h2 id="modal-title"></h2>
        <p id="modal-message"></p>
        <div class="modal-actions">
          <button id="modal-cancel" class="btn btn-secondary">Cancel</button>
          <button id="modal-confirm" class="btn btn-danger">Confirm</button>
        </div>
      </div>
    </div>

    <!-- Roll Modal -->
    <div id="roll-modal" class="modal hidden" aria-live="polite">
      <div class="modal-backdrop"></div>
      <div class="modal-content roll-modal-content">
        <h2 id="roll-title">Saving Throw</h2>
        <div id="roll-result" class="roll-result"></div>
        <div id="roll-detail" class="roll-detail"></div>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast hidden"></div>
  </div>

  <!-- Scripts -->
  <script src="js/data-loader.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/generator.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
</body>
</html>

